@model IEnumerable<ProyectoSistemaGCSW.Models.Tarea>

@{
    ViewBag.Title = "Tareas";

    var priorityClasses = new Dictionary<int, string>
{
        { 1, "critical" },
        { 2, "urgent" },
        { 3, "high" },
        { 4, "medium" },
        { 5, "low" },
        { 6, "optional" }
    };
}

<h2>Tareas</h2>

<div class="container mt-4">
    <div class="add-task-button">
        <a href="@Url.Action("Create", "Tarea")" class="btn btn-primary">+ Agregar Tarea</a>
    </div>
    <div class="kanban-container">
        <!-- Column: To Do -->
        <div class="kanban-column to-do">
            <h3>To Do</h3>
            <div class="kanban-cards">
                @foreach (var tarea in ViewBag.ToDo)
                {
                    <div class="kanban-card">
                        <h4><a href="@Url.Action("Details", "Tarea", new { id = tarea.id_tarea })">@tarea.titulo</a></h4>
                        <p>@tarea.descripcion</p>
                        <span class="priority @(priorityClasses.ContainsKey(tarea.Prioridad.id_prioridad) ? priorityClasses[tarea.Prioridad.id_prioridad] : "optional")">@tarea.Prioridad.nombre</span>
                    </div>
                }
            </div>
        </div>

        <!-- Column: In Progress -->
        <div class="kanban-column in-progress">
            <h3>In Progress</h3>
            <div class="kanban-cards">
                @foreach (var tarea in ViewBag.InProgress)
                {
                    <div class="kanban-card">
                        <h4><a href="@Url.Action("Details", "Tarea", new { id = tarea.id_tarea })">@tarea.titulo</a></h4>
                        <p>@tarea.descripcion</p>
                        <span class="priority @(priorityClasses.ContainsKey(tarea.Prioridad.id_prioridad) ? priorityClasses[tarea.Prioridad.id_prioridad] : "optional")">@tarea.Prioridad.nombre</span>
                    </div>
                }
            </div>
        </div>

        <!-- Column: Done -->
        <div class="kanban-column done">
            <h3>Done</h3>
            <div class="kanban-cards">
                @foreach (var tarea in ViewBag.Done)
                {
                    <div class="kanban-card">
                        <h4><a href="@Url.Action("Details", "Tarea", new { id = tarea.id_tarea })">@tarea.titulo</a></h4>
                        <p>@tarea.descripcion</p>
                        <span class="priority @(priorityClasses.ContainsKey(tarea.Prioridad.id_prioridad) ? priorityClasses[tarea.Prioridad.id_prioridad] : "optional")">@tarea.Prioridad.nombre</span>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
